<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  p,
  h4,
  h2 {
    font-family: Arial, Helvetica, sans-serif;
  }

  .foreground-color {
    color: #ffffff;
  }

  .background-color {
    background-color: #000000;
  }

  #container {
    width: 100vw;
    height: 100vh;
    background-color: #FBFBFB;
    display: grid;
    row-gap: 16px;
    padding: 16px;
    justify-items: center;
    align-content: start;
  }

  #background-container {
    display: grid;
    width: 100%;
    row-gap: 8px;
    /* background-color: white; */
    padding: 24px;
    border-radius: 16px;
    justify-items: center;
    align-items: center;
  }

  .shadow {
    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.1);
  }

  #colorGrid {
    width: 100%;
    padding: 8px;
    display: grid;
    column-gap: 8px;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    justify-self: center;
  }

  .colorBox {
    height: 16px;
    width: 16px;
    border-radius: 4px;
  }

  .color {
    display: grid;
    column-gap: 8px;
    grid-template-columns: auto auto;
    font-size: 12px;
    align-items: center;
  }

  #swap {
    cursor: pointer;
    justify-self: center;
  }

  #swap:hover {
    stroke: #000000;
  }

  .largeText {
    font-size: 18px;
  }
</style>
<div id="container">
  <div id="background-container" class="shadow background-color">
    <p class="foreground-color">The quick brown fox</p>
    <p class="foreground-color largeText">The quick brown fox</p>
  </div>
  <div id="colorGrid">
    <div class="color">
      <div class="colorBox shadow background-color"></div>
      <p id="bgValue">#000000</p>
    </div>
    <svg height="24" width="24" id="swap" stroke="#636363" xmlns="http://www.w3.org/2000/svg" fill="none"
      viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 1l4 4-4 4" />
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M3 11V9c0-1.06087.42143-2.07828 1.17157-2.82843C4.92172 5.42143 5.93913 5 7 5h14M7 23l-4-4 4-4" />
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M21 13v2c0 1.0609-.4214 2.0783-1.1716 2.8284C19.0783 18.5786 18.0609 19 17 19H3" />
    </svg>
    <div class="color">
      <div class="colorBox shadow foreground-color"></div>
      <p id="fgValue">#ffffff</p>
    </div>
  </div>
  <h2 id="contrast" style="color: black;"> 21:1</h2>
  <h4 id="largeTextStatus" class="largeText"></h4>
  <p id="normalTextStatus" style="color: black;"></p>
</div>
<script>


  function changeText(id, text) {
    const element = document.getElementById(id)
    return element.innerHTML = text
  }

  function changeColor(elements, color) {
    for (let i = 0; i < elements.length; i++) {
      if (elements[i].localName === 'div') {
        elements[i].style = `background-color: #${color};`
      } else {
        elements[i].style = `color: #${color};`
      }
    }
  }
  window.onmessage = async event => {
    const message = event.data.pluginMessage
    if (message.type === 'selectionChange') {
      const backgrounds = document.getElementsByClassName('background-color')
      const foregrounds = document.getElementsByClassName('foreground-color')
      changeColor(backgrounds, message.background)
      changeColor(foregrounds, message.foreground)
      changeText('fgValue', `#${message.foreground}`)
      changeText('bgValue', `#${message.background}`)
      changeText('contrast', message.contrast + ':1')
      changeText('largeTextStatus', 'large text: ' + message.largeTextStatus)
      changeText('normalTextStatus', "normal text: " + message.normalTextStatus)
    }
  }
  document.getElementById('swap').onclick = () => {
    parent.postMessage({ pluginMessage: { type: 'swap' } }, '*')
  }
</script>